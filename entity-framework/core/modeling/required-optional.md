---
title: Обязательные и необязательные свойства — EF Core
author: rowanmiller
ms.date: 10/27/2016
ms.assetid: ddaa0a54-9f43-4c34-aae3-f95c96c69842
uid: core/modeling/required-optional
ms.openlocfilehash: fd9e96e6f79965e63b07c21217edd004fd5c4d54
ms.sourcegitcommit: ec196918691f50cd0b21693515b0549f06d9f39c
ms.translationtype: MT
ms.contentlocale: ru-RU
ms.lasthandoff: 09/23/2019
ms.locfileid: "71197848"
---
# <a name="required-and-optional-properties"></a>Обязательные и необязательные свойства

Свойство считается необязательным, если для него допустимо значение `null`. Если `null` не является допустимым значением свойства, свойство считается обязательным.

При сопоставлении со схемой реляционной базы данных обязательные свойства создаются как столбцы, не допускающие значения NULL, а дополнительные свойства создаются как столбцы, допускающие значение null.

## <a name="conventions"></a>Соглашения

По соглашению свойство, тип .NET которого может содержать значение null, будет настроено как необязательный, тогда как свойства, типы .NET которых не могут содержать значение null, будут настроены как обязательные. Например, все свойства с типами значений .NET (`int`, `decimal`, `bool`и т. д.) настраиваются как обязательные, а все свойства с типами значений .NET`int?`, `decimal?`допускающими значение null (,, `bool?`и т. д.). настроено как необязательное.

C#в 8 появилась новая функция, называемая [ссылочными типами, допускающими значение NULL](/dotnet/csharp/tutorials/nullable-reference-types), которая позволяет создавать заметки для ссылочных типов, указывающих, является ли он допустимым для того, чтобы они содержали значение null. Эта функция отключена по умолчанию и, если она включена, изменяет поведение EF Core следующим образом:

* Если ссылочные типы, допускающие значение null, отключены (по умолчанию), все свойства с ссылочными типами .NET настраиваются как необязательные по соглашению (например `string`,).
* Если ссылочные типы, допускающие значение null, включены, то свойства C# будут настроены на основе допустимости `string?` значений NULL для их типа .NET: будут `string` настроены как необязательные, тогда как они будут настроены как обязательные.

В следующем примере показан тип сущности с обязательными и необязательными свойствами с отключенной ссылкой, допускающей значение null (по умолчанию) и включенной.

# <a name="without-nullable-reference-types-defaulttabwithout-nrt"></a>[Без ссылочных типов, допускающих значения NULL (по умолчанию)](#tab/without-nrt)

[!code-csharp[Main](../../../samples/core/Miscellaneous/NullableReferenceTypes/CustomerWithoutNullableReferenceTypes.cs?name=Customer&highlight=4-8)]

# <a name="with-nullable-reference-typestabwith-nrt"></a>[С ссылочными типами, допускающими значение null](#tab/with-nrt)

[!code-csharp[Main](../../../samples/core/Miscellaneous/NullableReferenceTypes/Customer.cs?name=Customer&highlight=4-6)]

***

Рекомендуется использовать ссылочные типы, допускающие значение null, так как она C# передает возможность принимать нулевое значение, выраженную в коде, в модель EF Core и в базу данных, а также устраняет использование заметок к данным в интерфейсе API или аннотациях данных для выражения одной концепции дважды

> [!NOTE]
> Соблюдайте осторожность при включении ссылочных типов, допускающих значение null, в существующем проекте: свойства ссылочного типа, которые ранее были настроены как необязательные, теперь будут настроены как обязательные, если только они не имеют явно заметку null. При управлении схемой реляционной базы данных это может привести к созданию миграции, которые изменяют допустимость значений NULL в столбце базы данных.

Дополнительные сведения о ссылочных типах, допускающих значения NULL, и об их использовании с EF Core [см. на специальной странице документации по этой функции](xref:core/miscellaneous/nullable-reference-types).

## <a name="configuration"></a>Параметр Configuration

Свойство, которое было бы необязательным по соглашению, может быть настроено следующим образом:

# <a name="data-annotationstabdata-annotations"></a>[Заметки к данным](#tab/data-annotations)

[!code-csharp[Main](../../../samples/core/Modeling/DataAnnotations/Required.cs?highlight=14)]

# <a name="fluent-apitabfluent-api"></a>[API Fluent](#tab/fluent-api) 

[!code-csharp[Main](../../../samples/core/Modeling/FluentAPI/Required.cs?highlight=11-13)]

***