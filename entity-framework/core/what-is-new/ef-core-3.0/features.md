---
title: Новые возможности в EF Core 3.0 — EF Core
author: divega
ms.date: 02/19/2019
ms.assetid: 2EBE2CCC-E52D-483F-834C-8877F5EB0C0C
uid: core/what-is-new/ef-core-3.0/features
ms.openlocfilehash: d61fa884f4669daa220ffc96ae59dd63518e6d5a
ms.sourcegitcommit: b2b9468de2cf930687f8b85c3ce54ff8c449f644
ms.translationtype: HT
ms.contentlocale: ru-RU
ms.lasthandoff: 09/12/2019
ms.locfileid: "70921679"
---
# <a name="new-features-included-in-ef-core-30-currently-in-preview"></a>Новые функции в EF Core 3.0 (сейчас предоставляются в виде предварительной версии)

> [!IMPORTANT]
> Обратите внимание на то, что наборы возможностей и расписания будущих выпусков могут быть изменены, и, несмотря на то, что мы стараемся поддерживать эту страницу в актуальном состоянии, в определенные моменты времени содержание страницы может не отражать наши текущие планы.

В следующем списке приведены ключевые новые функции, запланированные для реализации в EF Core 3.0.
Большинство этих функций не включаются в текущую предварительную версию, но будут доступны по мере продвижения к RTM.

Это вызвано тем, что в начале работы над выпуском мы сосредоточились на внедрении запланированных [критических изменений](xref:core/what-is-new/ef-core-3.0/breaking-changes).
Многие из этих критических изменений сами по себе являются усовершенствованиями EF Core.
Многие другие необходимы для реализации дополнительных улучшений. 

Полный список исправлений ошибок и усовершенствований, над которыми ведется работа, можно просмотреть в [этом запросе в средстве отслеживания вопросов](https://github.com/aspnet/EntityFrameworkCore/issues?q=is%3Aopen+is%3Aissue+milestone%3A3.0.0+sort%3Areactions-%2B1-desc).

## <a name="linq-improvements"></a>Улучшения LINQ 

[Отслеживание вопроса 12795](https://github.com/aspnet/EntityFrameworkCore/issues/12795)

Работа над этой функцией началась, однако она еще не включена в текущую предварительную версию.

LINQ позволяет писать запросы к базам данных прямо в коде вашего языка программирования, используя различные типы форматированных данных, функции IntelliSense и проверку типа во время компиляции.
Однако LINQ также поддерживает написание неограниченного числа сложных запросов, и поставщикам LINQ всегда было сложно обеспечить работу этой функции.
В ранних версиях EF Core эта проблема в какой-то мере решалась переводом определенных частей запроса на язык SQL и выполнением остальных частей в памяти на клиенте.
Выполнение на стороне клиента в некоторых ситуациях дает хороший результат, но во многих случаях могут создаваться неэффективные запросы, которые будут выявлены только при развертывании приложения в рабочей среде.
В EF Core 3.0 мы планируем основательно изменить нашу реализацию LINQ и принципы ее тестирования.
Мы хотим сделать ее более надежной (например, чтобы выпуски исправлений не нарушали работу старых запросов), обеспечить корректный перевод на язык SQL еще большего числа выражений, реализовать создание эффективных запросов для еще большего числа сценариев, а также улучшить обнаружение неэффективных запросов.

## <a name="cosmos-db-support"></a>Поддержка Cosmos DB 

[Отслеживание вопроса 8443](https://github.com/aspnet/EntityFrameworkCore/issues/8443)

Эта функция включена в текущую предварительную версию, но еще не готова. 

Мы создаем для EF Core поставщик Cosmos DB, который позволит разработчикам, знакомым с моделью программирования EF, легко использовать Azure Cosmos DB в качестве базы данных приложения.
Мы хотим, чтобы такие преимущества Cosmos DB, как глобальное распределение, постоянная готовность, эластичная масштабируемость и низкая задержка, стали еще доступнее .NET-разработчикам.
Поставщик позволит использовать API-интерфейс SQL в Cosmos DB с большинством функций EF Core, включая автоматическое отслеживание изменений, LINQ и преобразование значений.
Подготовка этих возможностей началась еще до выпуска EF Core 2.2, и [мы уже публиковали предварительные версии поставщика](https://blogs.msdn.microsoft.com/dotnet/2018/10/17/announcing-entity-framework-core-2-2-preview-3/).
Сейчас мы планируем продолжать его разработку вместе с разработкой EF Core 3.0. 

## <a name="dependent-entities-sharing-the-table-with-the-principal-are-now-optional"></a>Зависимые сущности, имеющие общую с субъектом таблицу, теперь являются необязательными

[Отслеживание вопроса № 9005](https://github.com/aspnet/EntityFrameworkCore/issues/9005)

Эта функция будет внесена в предварительную версию 4 EF Core 3.0.

Рассмотрим следующую модель:
```C#
public class Order
{
    public int Id { get; set; }
    public int CustomerId { get; set; }
    public OrderDetails Details { get; set; }
}

[Owned]
public class OrderDetails
{
    public int Id { get; set; }
    public string ShippingAddress { get; set; }
}
```

Начиная с EF Core 3.0, если класс `OrderDetails` принадлежит классу `Order` или явно сопоставляется с той же таблицей, можно добавлять класс `Order` без класса `OrderDetails`, и все свойства `OrderDetails`, за исключением первичного ключа, будут сопоставляться со столбцами, допускающими значения NULL.

При отправке запроса EF Core задаст `OrderDetails` значение `null`, если какому-либо его обязательному свойству не задано значение или если отсутствуют необходимые свойства, помимо первичного ключа, и все свойства имеют значение `null`.

## <a name="c-80-support"></a>Поддержка C# 8.0

[Отслеживание вопроса 12047](https://github.com/aspnet/EntityFrameworkCore/issues/12047)
[Отслеживание вопроса 10347](https://github.com/aspnet/EntityFrameworkCore/issues/10347)

Работа над этой функцией началась, однако она еще не включена в текущую предварительную версию.

Мы хотим предоставить клиентам возможность использовать в EF Core некоторые [будущие функции C# 8.0](https://blogs.msdn.microsoft.com/dotnet/2018/11/12/building-c-8-0/), например асинхронные потоки (включая `await foreach`) и ссылочные типы, допускающие значение null.

## <a name="reverse-engineering-of-database-views"></a>Реконструирование представлений базы данных

[Отслеживание вопроса 1679](https://github.com/aspnet/EntityFrameworkCore/issues/1679)

Эта функция не включена в текущую предварительную версию.

[Типы запросов](xref:core/modeling/query-types), представленные в EF Core 2.1 и учитывающие типы сущностей без ключей в EF Core 3.0, представляют данные, которые можно считать из базы данных, но невозможно изменить.
Благодаря этой особенности они отлично подходят для представлений базы данных в большинстве сценариев, поэтому мы планируем автоматизировать создание типов сущностей без ключей при реконструировании представлений базы данных.

## <a name="ef-63-on-net-core"></a>EF 6.3 на платформе .NET Core

[Отслеживание вопроса EF6#271](https://github.com/aspnet/EntityFramework6/issues/271)

Работа над этой функцией началась, однако она еще не включена в текущую предварительную версию. 

Мы понимаем, что многие существующие приложения используют предыдущие версии EF и перенос этих приложений на EF Core исключительно для поддержки функций .NET Core может оказаться очень трудоемким.
По этой причине мы планируем адаптировать следующую версию EF 6 к работе на платформе .NET Core 3.0.
Это делается для того, чтобы перенос существующих приложений был прост и требовал лишь минимальных изменений.
Однако имеются и некоторые ограничения. Например:
- Потребность в новых поставщиках для работы с другими базами данных, кроме предусмотренной в .NET Core поддержки SQL Server.
- Поддержка пространственных индексов в SQL Server не будет реализована.

Кроме того, обратите внимание, что никаких новых функций для EF 6 сейчас не запланировано.
