---
title: Сравнение Entity Framework 6 и Entity Framework Core — EF
description: Руководство по выбору между Entity Framework 6 и Entity Framework Core.
author: rowanmiller
ms.date: 10/27/2016
ms.assetid: a6b9cd22-6803-4c6c-a4d4-21147c0a81cb
uid: efcore-and-ef6/index
ms.openlocfilehash: 62f7da64bbb6289edd38b877af71fc126e03d0f6
ms.sourcegitcommit: 32c51c22988c6f83ed4f8e50a1d01be3f4114e81
ms.translationtype: HT
ms.contentlocale: ru-RU
ms.lasthandoff: 12/27/2019
ms.locfileid: "75502293"
---
# <a name="compare-ef-core--ef6"></a>Сравнение EF Core и EF6

Entity Framework является средством объектно-реляционного сопоставления (O/RM) для .NET. В этой статье сравниваются две версии: Entity Framework 6 и Entity Framework Core.

## <a name="entity-framework-6"></a>Entity Framework 6

Entity Framework 6 (EF6) — это проверенная технология доступа к данным. Впервые этот продукт был выпущен в 2008 году в составе пакета обновления 1 (SP1) для платформы .NET Framework 3.5 и пакета обновления 1 (SP1) для Visual Studio 2008. Начиная с версии 4.1 он поставлялся в виде пакета NuGet [EntityFramework](https://www.nuget.org/packages/EntityFramework/). EF6 выполняется в .NET Framework 4.x и .NET Core 3.0 и последующих версий.

EF6 все еще поддерживается, и для него будут выходить исправления ошибок и небольшие улучшения.

## <a name="entity-framework-core"></a>Entity Framework Core

Entity Framework Core (EF Core) является совершенно новым вариантом EF6, который был выпущен в 2016 г. Он поставляется в пакетах Nuget, главный из них — [Microsoft.EntityFrameworkCore](https://www.nuget.org/packages/Microsoft.EntityFrameworkCore/). EF Core — это кроссплатформенный продукт, который можно запускать в .NET Core.

EF Core был разработан как аналог EF6. Большая часть API верхнего уровня сохранена, поэтому EF Core покажется знакомым тем разработчикам, которые использовали EF6.

## <a name="feature-comparison"></a>Сравнение функций

EF Core предлагает новые функции, которые не будут реализованы в EF6 (например, [альтернативные ключи](xref:core/modeling/keys#alternate-keys), [пакетные обновления](xref:core/what-is-new/ef-core-1.0#relational-batching-of-statements) и [смешанные оценки клиентов и баз данных в запросах LINQ](xref:core/querying/client-eval). Но поскольку это новая база кода, там отсутствуют некоторые функции EF6.

В следующей таблице представлено сравнение возможностей, доступных в EF Core и EF6. Это общее сравнение, здесь не указаны все функции и не объясняются различия между одной и той же возможностью в разных версиях EF.

Столбец EF Core содержит версию продукта, в которой эта возможность появилась впервые.

### <a name="creating-a-model"></a>Создание модели

| **Возможность**                                           | **EF 6** | **EF Core**                           |
|:------------------------------------------------------|:---------|:--------------------------------------|
| Сопоставление базовых классов                                   | Да      | 1.0                                   |
| Конструкторы с параметрами                          |          | 2.1                                   |
| Преобразования значений свойств                            |          | 2.1                                   |
| Сопоставленные типы без ключей (типы запросов)                             |          | 2.1                                   |
| Соглашения                                           | Да      | 1.0                                   |
| Соглашения об именовании                                    | Да      | 1.0 (частично)                         |
| Заметки к данным                                      | Да      | 1.0                                   |
| Текучий API                                            | Да      | 1.0                                   |
| Наследование: одна таблица на иерархию (TPH)                | Да      | 1.0                                   |
| Наследование: одна таблица на тип (TPT)                     | Да      |                                       |
| Наследование: одна таблица на конкретный класс (TPC)           | Да      |                                       |
| Теневые свойства состояния                               |          | 1.0                                   |
| Альтернативные ключи                                        |          | 1.0                                   |
| Многие ко многим без сущности соединения                      | Да      |                                       |
| Создание ключей: База данных                              | Да      | 1.0                                   |
| Создание ключей: "Клиент";                                |          | 1.0                                   |
| Сложные и принадлежащие типы                                   | Да      | 2.0                                   |
| Пространственные данные                                          | Да      | 2.2                                   |
| Графическое представление модели                      | Да      |                                       |
| Графический редактор моделей                                | Да      |                                       |
| Формат модели: Код                                    | Да      | 1.0                                   |
| Формат модели: EDMX (XML)                              | Да      |                                       |
| Создание модели из базы данных: Командная строка              | Да      | 1.0                                   |
| Создание модели из базы данных: Мастер Visual Studio                 | Да      |                                       |
| Обновление модели из базы данных                            | Partial  |                                       |
| Глобальные фильтры запросов                                  |          | 2.0                                   |
| Разбиение таблиц                                       | Да      | 2.0                                   |
| Разбиение сущностей                                      | Да      |                                       |
| Сопоставление скалярных функций базы данных                      | Плохо     | 2.0                                   |
| Сопоставление полей                                         |          | 1.1                                   |
| Ссылочные типы, допускающие значение NULL (C# 8.0)                     |          | 3.0                                   |

### <a name="querying-data"></a>Запросы к данным

| **Возможность**                                           | **EF6**  | **EF Core**                           |
|:------------------------------------------------------|:---------|:--------------------------------------|
| Запросы LINQ                                          | Да      | 1.0 (ожидается для сложных запросов) |
| Создание удобного для чтения кода SQL                                | Плохо     | 1.0                                   |
| Преобразование оператора GroupBy                                   | Да      | 2.1                                   |
| Загрузка связанных данных: безотложная                           | Да      | 1.0                                   |
| Загрузка связанных данных: безотложная загрузка для производных типов |          | 2.1                                   |
| Загрузка связанных данных: Отложена                            | Да      | 2.1                                   |
| Загрузка связанных данных: Явные                        | Да      | 1.1                                   |
| Необработанные SQL-запросы: Типы сущностей                         | Да      | 1.0                                   |
| Необработанные SQL-запросы: Типы сущностей без ключей                 | Да      | 2.1                                   |
| Необработанные SQL-запросы: Создание с помощью LINQ                  |          | 1.0                                   |
| Явным образом скомпилированные запросы                           | Плохо     | 2.0                                   |
| Язык текстовых запросов (Entity SQL)                | Да      |                                       |
| await foreach (C# 8.0)                                |          | 3.0                                   |

### <a name="saving-data"></a>Сохранение данных

| **Возможность**                                           | **EF6**  | **EF Core**                           |
|:------------------------------------------------------|:---------|:--------------------------------------|
| Отслеживание изменений: Снимок                             | Да      | 1.0                                   |
| Отслеживание изменений: Уведомление                         | Да      | 1.0                                   |
| Отслеживание изменений: Прокси-элементы                              | Да      |                                       |
| Доступ к отслеживаемому состоянию                               | Да      | 1.0                                   |
| Оптимистическая блокировка                                | Да      | 1.0                                   |
| Транзакции                                          | Да      | 1.0                                   |
| Пакетная обработка инструкций                                |          | 1.0                                   |
| Сопоставление хранимых процедур                              | Да      |                                       |
| Низкоуровневые API для несвязных графов                     | Плохо     | 1.0                                   |
| Полный проход несвязных графов                         |          | 1.0 (частично)                         |

### <a name="other-features"></a>Другие возможности

| **Возможность**                                           | **EF6**  | **EF Core**                           |
|:------------------------------------------------------|:---------|:--------------------------------------|
| Миграции                                            | Да      | 1.0                                   |
| Интерфейсы API для создания и удаления баз данных                       | Да      | 1.0                                   |
| Начальное значение данных                                             | Да      | 2.1                                   |
| Устойчивость подключений                                 | Да      | 1.1                                   |
| Обработчики жизненного цикла (события, перехват)                | Да      |                                       |
| Простое ведение журналов (Database.Log)                         | Да      |                                       |
| Создание пулов DbContext                                     |          | 2.0                                   |

### <a name="database-providers"></a>Поставщики баз данных

| **Возможность**                                           | **EF6**  | **EF Core**                           |
|:------------------------------------------------------|:---------|:--------------------------------------|
| SQL Server                                            | Да      | 1.0                                   |
| MySQL                                                 | Да      | 1.0                                   |
| PostgreSQL                                            | Да      | 1.0                                   |
| Oracle                                                | Да      | 1.0                                   |
| SQLite                                                | Да      | 1.0                                   |
| SQL Server Compact                                    | Да      | 1.0 <sup>(1)</sup>                    |
| DB2                                                   | Да      | 1.0                                   |
| Firebird                                              | Да      | 2.0                                   |
| Jet (Microsoft Access)                                |          | 2.0 <sup>(1)</sup>                    |
| Cosmos DB                                             |          | 3.0                                   |
| В памяти (для тестирования)                               |          | 1.0                                   |

<sup>1</sup> Поставщики SQL Server Compact и Jet работают только в .NET Framework (но не в .NET Core).

### <a name="net-implementations"></a>Реализации .NET

| **Возможность**                                           | **EF6**            | **EF Core**                           |
|:------------------------------------------------------|:-------------------|:--------------------------------------|
| .NET Framework                                        | Да                | 1.0 (удалено в версии 3.0)                  |
| .NET Core                                             | Да (добавлено в версии 6.3) | 1.0                                   |
| Mono и Xamarin                                        |                    | 1.0 (ожидается)                     |
| UWP                                                   |                    | 1.0 (ожидается)                     |

## <a name="guidance-for-new-applications"></a>Рекомендации для новых приложений

Используйте EF Core в новом приложении, если выполнены оба условия:
* Приложению нужны возможности .NET Core. Дополнительные сведения см. в статье [Выбор между .NET Core и .NET Framework для серверных приложений](https://docs.microsoft.com/dotnet/standard/choosing-core-framework-server).
* EF Core поддерживает все функции, которые требуются приложению. Если нужная функция отсутствует, ознакомьтесь со [стратегией развития EF Core](xref:core/what-is-new/index), чтобы узнать, будет ли эта функция поддерживаться в будущем. 

Используйте EF6, если выполнены оба условия:
* Приложение будет работать на Windows и .NET Framework 4.0 или более поздней версии.
* EF6 поддерживает все функции, которые требуются приложению.

## <a name="guidance-for-existing-ef6-applications"></a>Рекомендации для существующих приложений EF6

Из-за фундаментальных отличий от EF Core мы не рекомендуем переносить приложения EF6 на EF Core, если для этого нет веской причины. Если вы хотите перенести приложение на EF Core, чтобы использовать новые возможности, заранее ознакомьтесь со всеми существующими ограничениями. Дополнительные сведения см. в разделе [Перенос приложений из EF6 в EF](porting/index.md). **Переход с EF6 на EF Core — это скорее перенос, чем обновление.**

## <a name="next-steps"></a>Следующие шаги

Дополнительные сведения см. в документации:
* <xref:core/index>
* <xref:ef6/index>
